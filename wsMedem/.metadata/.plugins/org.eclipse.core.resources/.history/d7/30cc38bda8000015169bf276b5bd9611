 <%@page session="true"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring" %>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<!DOCTYPE>
<html>
    <head>
      <meta charset="utf=8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
      <script src="/medem/bootstrap/bootstrap-3.3.2-dist/js/bootstrap.min.js"></script>
      <script type='text/javascript' src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js"></script>
	  <script type='text/javascript' src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/additional-methods.js"></script>
      <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
	  <script src="/medem/js/main_functions.js"></script>
	  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
      <link href="/medem/bootstrap/bootstrap-3.3.2-dist/css/bootstrap.min.css" rel="stylesheet">
      <link href="/medem/css/general_layout_override.css" rel="stylesheet">
      <link href="/medem/css/custom.css" rel="stylesheet" >
      <title>MEDEM :: Area :: Nueva Area.</title>
    </head><!-- HEAD_END -->

	<body id="newArea">
		
		
		   <jsp:include page="layouts/navigation_layout.jsp"></jsp:include>	
		   
		   <jsp:include page="layouts/modal_layout.jsp"></jsp:include>		   
	
	
	       <div class="container">
			  <div class="col-md-12">
			    <div class="row">
					<div class="col-md-8 col-md-offset-2">
					  <div class="panel panel-default">
					    <div class="panel-heading">
                		  <h3 class="panel-title"><span class="glyphicon glyphicon-pencil"></span> :: Datos de la nueva area</h3>
              			</div><!-- .panel-heading -->
              			<div class="panel-body">
		                 <form:form action="/medem/addArea" method="POST" modelAttribute="Area" id="newAreaForm">
		                    <div class="form-group">
		                      <form:label path="name">Nombre del area</form:label>
		                      <form:input path="name" class="form-control" placeholder="Nombre del area" />
		                    </div><!--. form-group input-group -->
							<form:hidden path="active" value="1" />
		                    <form:hidden path="userName" value="armando"></form:hidden> 
		                    <input type="hidden" name="companyId" value="${companyId }" />
		                    <input type="submit" class="btn btn-block btn-primary" tabindex="6" value="Crear Nueva Area">
		                  </form:form><!-- .form -->              			
              			</div><!-- .panel-body -->
					  </div><!-- .panel panel-default -->
					</div><!-- .col-md-8 col-md-offset-2 -->			    
			    </div><!-- .row -->
			  </div><!-- .col-md-12 -->
		   </div><!-- .container -->
		   
		   <jsp:include page="layouts/footer_layout.jsp"></jsp:include>
	
	</body>
	
	
	<script>
      $(document).ready(function(){
    	  console.log("Done.");

    	//Form validation
    	  $validator = $("#newAreaForm").validate({
      	    rules:{
    	    	name: {
    	    		minlength: 2,
	                required: true
    	    	}
    	    },
	    	messages: {
	    		name: "Por favor, introduzca el nombre."
	    	},
			highlight: function (element) {
	            $(element).closest("div").addClass('has-error');
	        },
	        errorPlacement: function(error, element) {},
	        submitHandler: function(form) { 
	        	form.submit(); 
	        }     		  
    	  });
    	  
    	  $("#newAreaForm").submit(function(){
     		 if($validator.numberOfInvalids() > 0){
     			 var errorSummary = "";
     			 $.each($validator.errorList, function(){
     				 errorSummary += this.message + "<br/>";
     			 });
     			 showMessage(errorSummary, "danger");
     		 } 
     		 else{
     			 showMessage("Procesando...", "success");
     		 }
     	  });
    	  //Form validation
      });
    </script>	
</html>